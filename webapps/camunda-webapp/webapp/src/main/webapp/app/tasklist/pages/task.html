<div class="control-group" ngm-if="form.loaded">
  <h5>My Complete Task</h5>
  <h3>{{ task.name }}</h3>

  <p>
    <strong>Created:</strong> {{ task.created | date:'medium' }}
  </p>

  <hr />

  <form ng-submit="submit()">
    <div ngm-if="form.genericForm.formGroups.length != 0">
       <tabset>
           <tab ng-repeat="formGroup in form.genericForm.formGroups" heading="{{formGroup.name}}" active="$first">

                <div ng-repeat="formField in formGroup.formFields">
                    <select ngm-if="formField.type == 'dropdown'" ng-model="Values[formField.id]">
                        <option ng-repeat="value in formField.defaultValue">{{value}}</option>
                    </select>
                    
                    <input ngm-if="formField.type == 'string' || formField.type == 'text'" id="{{formField.id}}" class="input-xlarge" type="text" placeholder="{{formField.name}}" ng-model="Values[formField.id]" />
                </div>
            </tab>
       </tabset>
    </div>

    <div ngm-if="form.genericForm.formGroups.length == 0 && !form.key && !form.generic">
      <p>
        It looks as if no form has been defined for the task.
      </p>

      <button class="btn" ng-click="activateGeneric()">Work on task using generic form</button>
    </div>
    <div ngm-if="form.generic">
      <h5>Variables</h5>

      <p>
        Use the form below to add variables that will be be passed onto the process instance upon task completion.
      </p>

      <div ng-include="'common/form/generic-variables.html'"></div>
    </div>

    <div ngm-if="form.embedded && !form.generic">
      <div style="margin: 20px 0 20px 0" ng-include="form.key" task-variables="variables"></div>
    </div>

    <div ngm-if="form.embedded || form.generic || form.genericForm.formGroups.length != 0">
      <button class="btn btn-primary" type="submit">Complete Task</button>
      <button class="btn" ng-click="cancel()">Cancel</button>
    </div>
  </form>
</div>