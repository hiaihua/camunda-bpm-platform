<div class="control-group" ngm-if="form.loaded">
  <h5>My Complete Task</h5>
  <h3>{{ task.name }}</h3>

  <p>
    <strong>Created:</strong> {{ task.created | date:'medium' }}
  </p>

  <hr />

  <form ng-submit="submit()">
    <div ngm-if="form.genericForm.formGroups.length != 0">
       <tabset>
           <tab ng-repeat="formGroup in form.genericForm.formGroups" heading="{{formGroup.name}}" active="$first">

                <div ng-repeat="formField in formGroup.formFields" ng-switch on="formField.type">

                        <div ng-switch-when="select">
                            <b>{{formField.name}}</b><br />
                            <select ng-model="values[formField.id]" ng-required="{{formField.validation.constraints.required}}">
                                <option ng-repeat="value in formField.defaultValue">{{value}}</option>
                            </select>
                        </div>

                        <div ng-switch-when="textarea">
                            <textarea id="{{formField.id}}" class="input-xlarge" type="{{formField.type}}" placeholder="{{formField.name}}" ng-model="values[formField.id]" ng-required="{{formField.validation.constraints.required}}" ng-minlength="{{formField.validation.constraints.minlength}}" ng-maxlength="{{formField.validation.constraints.maxlength}}" />
                        </div>

                        <div ng-switch-when="checkbox">
                            <b>{{formField.name}}</b><br />
                            <div ng-repeat="value in formField.defaultValue">
                                <input name="{{formField.id}}" type="{{formField.type}}" value="{{value}}" ng-model="values[formField.id][$index]" ng-required="{{formField.validation.constraints.required}}" /> {{value}}<br />
                            </div>
                            <br />
                        </div>

                        <div ng-switch-when="radio">
                            <b>{{formField.name}}</b><br />
                            <div ng-repeat="value in formField.defaultValue">
                                <input name="{{formField.id}}" type="{{formField.type}}" value="{{value}}" ng-model="values[formField.id]" /> {{value}}<br />
                            </div>
                            <br />
                        </div>

                        <div ng-switch-default>
                            <div ng-switch="formField.configuration.configs.iconprepend != undefined">
                                <div ng-switch-when="true" class="input-prepend">
                                    <span class="add-on"><i class="{{formField.configuration.configs.iconprepend}}"></i></span>
                                    <input id="{{formField.id}}" class="input-xlarge" type="{{formField.type}}" placeholder="{{formField.name}}" ng-model="values[formField.id]" ng-required="{{formField.validation.constraints.required}}" ng-minlength="{{formField.validation.constraints.minlength}}" ng-maxlength="{{formField.validation.constraints.maxlength}}" min="{{formField.validation.constraints.min}}" max="{{formField.validation.constraints.max}}" />
                                 </div>

                                 <div ng-switch-default>
                                     <input id="{{formField.id}}" class="input-xlarge" type="{{formField.type}}" placeholder="{{formField.name}}" ng-model="values[formField.id]" ng-required="{{formField.validation.constraints.required}}" ng-minlength="{{formField.validation.constraints.minlength}}" ng-maxlength="{{formField.validation.constraints.maxlength}}" min="{{formField.validation.constraints.min}}" max="{{formField.validation.constraints.max}}" />
                                 </div>
                            </div>
                        </div>
                </div>
            </tab>
       </tabset>
    </div>

    <div ngm-if="form.genericForm.formGroups.length == 0 && !form.key && !form.generic">
      <p>
        It looks as if no form has been defined for the task.
      </p>

      <button class="btn" ng-click="activateGeneric()">Work on task using generic form</button>
    </div>
    <div ngm-if="form.generic">
      <h5>Variables</h5>

      <p>
        Use the form below to add variables that will be be passed onto the process instance upon task completion.
      </p>

      <div ng-include="'common/form/generic-variables.html'"></div>
    </div>

    <div ngm-if="form.embedded && !form.generic">
      <div style="margin: 20px 0 20px 0" ng-include="form.key" task-variables="variables"></div>
    </div>

    <div ngm-if="form.embedded || form.generic ||Â form.genericForm.formGroups.length != 0">
      <br />
      <button class="btn btn-primary" type="submit">Complete Task</button>
      <button class="btn" ng-click="cancel()">Cancel</button>
    </div>
  </form>
</div>